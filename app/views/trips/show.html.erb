<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://dfp2hfrf3mn0u.cloudfront.net/cre/creston-ic-v3_1600x685_home-main-banner_2019_SYNCROS_1616656_jpg_original_1.jpg);">
    <h1>Infos on selected trip</h1>
</div>


<div class="container grid-cards">
  <div class="container-title">
    <h1><%= @trip.destination.upcase %></h1>
  </div>

  <div id="map"
     style="width: 40%; height: 150px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  <div>

  </div>

  <div class="container-infos">
      <h4><strong>Start date</strong></h4>
      <p><%= @trip.start_date %></p>
      <h4><strong>End date</strong></h4>
      <p><%= @trip.end_date %></p>
      <h4><strong>Budget/week</strong></h4>
      <p><%= @trip.budget %> â‚¬/week</p>
      <h4><strong>Interests</strong></h4>
      <p><%= @trip.interest.name %></p>
  </div>
</div>

<div class="container-infos text-center">
  <% if policy(@trip).edit? %>
    <%= link_to "Update my trip", edit_trip_path(@trip), class: "btn-round-corners" %>
  <% end %>

  <% if policy(@trip).destroy? %>
    <%= link_to "Delete my trip", trip_path(@trip), method: :delete, data: {confirm: "Are you sure?"}, class: "btn-round-corners" %>
  <% end %>

  <% if @trip_interaction.empty? && @trip.user != current_user%>
    <%= simple_form_for [@trip, @interaction] do |f| %>
      <%= f.submit "Start interaction", class: "btn btn-primary" %>
    <% end %>
  <% elsif @trip.user == current_user %>
    <% @trip.interactions.each do |interaction| %>
      <%= link_to "Your trip_interaction with #{interaction.user.nickname}", trip_interaction_path(@trip, interaction), class: "btn btn-primary"%>
    <% end %>
  <% else %>
    <%= link_to "Join trip_interaction", trip_interaction_path(@trip, @trip_interaction[0]), class: "btn btn-primary"%>
  <% end %>
</div>
