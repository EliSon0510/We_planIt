<div class="banner pt-4" style="background-image: linear-gradient(rgba(0,0,0,0.2),rgba(0,0,0,0.2)), url(https://ibf.church/wp-content/uploads/2014/11/map-banner.jpg)">
  <div class="container">
    <h1>Find your next vacation !</h1>
    <%= form_tag trips_path, method: :get do %>
      <%= text_field_tag :destination, nil, autocomplete: :on, placeholder: "Search for your location", class: 'form-control search-input', id:'search-bar'%>
      <% budgets = [["0-300 €/week", "0-300"], ["300-600 €/week", "300-600"], ["600 - 1000 €/week", "600-1000"], ["> 1000 €/week", ">=1000"] ] %>
      <%= select_tag :budget, options_for_select(budgets), prompt: "Select your budget" %>
      <%=label_tag 'Starting date of your next trip:' %>
      <%= date_select 'start date', :start_date %>
      <%=label_tag ' - Ending date of your next trip:' %>
      <%= date_select 'end date', :end_date %>
      <% interests = ["Activism","Adventure", "Arts", "Business Trip", "Climate protection", "Concert", "Design", "Extreme Sports", "Food Vlogging", "Green Living", "Hiking", "Lifestyle", "Local food", "Museums & History", "Natural Wonders", "Partying", "Photography", "Safari", "Sailing", "Vacations"] %>
      <% Interest.all.map(&:name).each do |interest| %>
      <%= check_box_tag "interests[]", interest %>
      <%= interest %>
      <% end %>
      <%= submit_tag 'Search', name: nil %>
    <% end %>
  </div>
</div>
<% if @query && @trips.size == 0  %>
<h3> Sorry, there are no trips found ... Please, create your own! </h3>
<% end %>

<div style="
  background-color: white;
  margin: 15px 0;
  padding: 30px 0;
  display: flex;
  flex-direction: column;
  align-items: center;">
  <h2>Add your trip to the list</h2>
  <%= link_to "New trip !", new_trip_path, class: "btn btn-flat"%>
</div>



<div class="trips-map background_white">
<div>
  <h2 class="pl-3 text-center">All the created trips</h2>
  <br>
  <div class="flex-container">

    <% @trips.sort_by(&:updated_at).each do |trip| %>


        <div class="trip-card height315px">
          <div>
            <% if trip.photo.attached? %>
                <%= cl_image_tag trip.photo.key, crop: :fill %>
            <% else %>
                <%= image_tag "WorldLogo.png"%>
            <% end %>
          </div>
          <div class="trip-details">
            <div class="trip-destination">
              <h3><%= link_to trip.destination, trip_path(trip) %></h3>
            </div>
            <div class="trip-schedule">
              <h4><%= trip.start_date %></h4>
              <h4><%= trip.end_date %></h4>
            </div>
            <div class="trip-budget">
              <h4><%= trip.budget %> €/week</h4>
            </div>
            <div class="trip-bottom">
              <div class="trip-interests">
                <ul> <% trip.interests.first(2).each do |interest| %>
                  <li><%= interest.name %></li>
                <% end %>
                <% if trip.interests.size > 2 %>
                  <li> ...</li>
                <% end %>
                </ul>
              </div>
              <div class="sticky-bottom">
                <%= link_to"See more", trip_path(trip) %>
              </div>
            </div>
          </div>
        </div>

      <% end %>
    </div>

  </div>

  <div id="map"
       data-markers="<%= @markers.to_json %>"
       data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>

